<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 4 Recitation 4 | Introduction to R</title>
<meta name="author" content="Tptrix29">
<meta name="description" content="Today you learned… pivots: pivot_longer(), pivot_wider() joins: right_join(), left_join(), inner_join(), full_join() This worksheet will help you get accustomed to using these functions to...">
<meta name="generator" content="bookdown 0.39 with bs4_book()">
<meta property="og:title" content="Chapter 4 Recitation 4 | Introduction to R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://bookdown.org/janedoe/bookdown-demo/recitation-4.html">
<meta property="og:image" content="https://bookdown.org/janedoe/bookdown-demo/_main_files/img/R_logo.png">
<meta property="og:description" content="Today you learned… pivots: pivot_longer(), pivot_wider() joins: right_join(), left_join(), inner_join(), full_join() This worksheet will help you get accustomed to using these functions to...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 4 Recitation 4 | Introduction to R">
<meta name="twitter:description" content="Today you learned… pivots: pivot_longer(), pivot_wider() joins: right_join(), left_join(), inner_join(), full_join() This worksheet will help you get accustomed to using these functions to...">
<meta name="twitter:image" content="https://bookdown.org/janedoe/bookdown-demo/_main_files/img/R_logo.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="styles.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Introduction to R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Home</a></li>
<li><a class="" href="recitation-1.html"><span class="header-section-number">1</span> Recitation 1</a></li>
<li><a class="" href="recitation-2.html"><span class="header-section-number">2</span> Recitation 2</a></li>
<li><a class="" href="recitation-3.html"><span class="header-section-number">3</span> Recitation 3</a></li>
<li><a class="active" href="recitation-4.html"><span class="header-section-number">4</span> Recitation 4</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/Tptrix29/r-tutorials">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="recitation-4" class="section level1" number="4">
<h1>
<span class="header-section-number">4</span> Recitation 4<a class="anchor" aria-label="anchor" href="#recitation-4"><i class="fas fa-link"></i></a>
</h1>
<p><strong>Today you learned…</strong></p>
<ul>
<li>pivots: <em>pivot_longer()</em>, <em>pivot_wider()</em>
</li>
<li>joins: <em>right_join()</em>, <em>left_join()</em>, <em>inner_join()</em>, <em>full_join()</em>
</li>
</ul>
<p>This worksheet will help you get accustomed to using these functions to manipulate data.</p>
<p>Load any necessary packages in your first chunk of code.</p>
<p>Please work out the following exercises sequentially. There may be more than one way to code the exercises.</p>
<div id="part-i-2" class="section level2" number="4.1">
<h2>
<span class="header-section-number">4.1</span> Part I<a class="anchor" aria-label="anchor" href="#part-i-2"><i class="fas fa-link"></i></a>
</h2>
<ol start="0" style="list-style-type: decimal">
<li>Load the data you’ll need for Part I by simply running the code below.</li>
</ol>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fl">2001</span><span class="op">:</span><span class="fl">2020</span><span class="op">)</span></span>
<span><span class="va">team</span> <span class="op">&lt;-</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">yr_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="va">num</span>, nrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">set_names</span><span class="op">(</span><span class="va">year</span><span class="op">)</span></span>
<span></span>
<span><span class="va">index</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span></span>
<span></span>
<span><span class="va">tbi_age</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-03-24/tbi_age.csv"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Rows: 231 Columns: 5
## ── Column specification ─────────────────────────────────────────────────────────────────────
## Delimiter: ","
## chr (3): age_group, type, injury_mechanism
## dbl (2): number_est, rate_est
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<ol style="list-style-type: decimal">
<li><p>Add <code>index</code> to the <code>yr_data</code> data frame via binding. Call the index column in the resulting data frame <code>idx</code>. Make sure to have <code>idx</code> positioned as the first column.</p></li>
<li><p>Is the data currently in wide or long format? Justify your answer with a complete sentence.</p></li>
</ol>
<p>[YOUR ANSWER HERE]</p>
<ol start="3" style="list-style-type: decimal">
<li><p>Create one <code>year</code> column and put all data currently stored in columns 2001 to 2020 into a column called <code>points</code>. Save this updated data frame as <code>yr_data_long</code>.</p></li>
<li><p>View the <code>tbi_age</code> data and decide what format it’s in. Justify your answer.</p></li>
</ol>
<p>[YOUR ANSWER HERE]</p>
<ol start="5" style="list-style-type: decimal">
<li>Transform this data so that we can see <code>number_est</code> for each age group along with <code>type</code> and <code>injury_mechanism</code>, like below. Save this data frame as <code>tbi_wide</code>.</li>
</ol>
</div>
<div id="part-ii-1" class="section level2" number="4.2">
<h2>
<span class="header-section-number">4.2</span> Part II<a class="anchor" aria-label="anchor" href="#part-ii-1"><i class="fas fa-link"></i></a>
</h2>
<p>In this example, we have a data frame with head counts for grain feeding producers and another data frame with head counts from grass feeding producers; there is potentially overlap between the producers that have both grain and grass fed animals and we want to merge them into one data frame. Note that producer number is not unique, but it is unique within state, so we need to merge on both state and producer number together.</p>
<ol start="0" style="list-style-type: decimal">
<li>Load the data for Part II by simply running the code below.</li>
</ol>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grass</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  producer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"NSW"</span>, <span class="st">"NSW"</span>, <span class="st">"QLD"</span>, <span class="st">"QLD"</span><span class="op">)</span>,</span>
<span>  count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">59</span>, <span class="fl">82</span>, <span class="fl">37</span>, <span class="fl">28</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">grain</span> <span class="op">&lt;-</span>  <span class="fu">tibble</span><span class="op">(</span></span>
<span>  producer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"NSW"</span>, <span class="st">"QLD"</span>, <span class="st">"NSW"</span>, <span class="st">"QLD"</span><span class="op">)</span>,</span>
<span>  count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">192</span>, <span class="fl">21</span>, <span class="fl">37</span>, <span class="fl">81</span><span class="op">)</span>,</span>
<span>  post_code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"2680"</span>, <span class="st">"4700"</span>, <span class="st">"2650"</span>, <span class="st">"4715"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Keep all the observations that are present in the <code>grass</code> data frame and join it with the <code>grain</code> data frame using the code below. What does the argument <code>by = c("producer","state")</code> do?</li>
</ol>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gg_lj</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">grass</span>, <span class="va">grain</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"producer"</span>, <span class="st">"state"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>[YOUR ANSWER HERE]</p>
<ol start="2" style="list-style-type: decimal">
<li>Add the argument <code>suffix = c("_grass", "_grain")</code> to the line of code below. What does this argument do?</li>
</ol>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gg_lj2</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">grass</span>, <span class="va">grain</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"producer"</span>, <span class="st">"state"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>[YOUR ANSWER HERE]</p>
<ol start="3" style="list-style-type: decimal">
<li><p>Join the data frames by writing code that keeps all the observations that are present in <code>grain</code>.</p></li>
<li><p>Are there any missing data? Why does this happen?</p></li>
</ol>
<p>[YOUR ANSWER HERE]</p>
<ol start="5" style="list-style-type: decimal">
<li><p>Use a join that keeps any observations that occur in either of the two data frames.</p></li>
<li><p>Looking at this merged data frame, can you tell whether producer 3 is a grass or grain feeding producer? How?</p></li>
</ol>
<p>[YOUR ANSWER HERE]</p>
<ol start="7" style="list-style-type: decimal">
<li><p>Use a join that keeps only observations that are present in both data frames.</p></li>
<li><p>What are the dimensions of this merged data? Why do we see what we see?</p></li>
</ol>
<p>[YOUR ANSWER HERE]</p>
</div>
<div id="part-iii-bonus-questions" class="section level2" number="4.3">
<h2>
<span class="header-section-number">4.3</span> Part III (Bonus Questions)<a class="anchor" aria-label="anchor" href="#part-iii-bonus-questions"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>Clean the <code>tbi_wide</code> data so that it contains the following age groups: 0-4, 5-17, 18-24, 25-34, 35-44, 45-54, 55-64, 65-74, 75+, and Total. Keep the data in wide format. Save your new data frame as <code>tbi_clean</code>.</p></li>
<li><p>Start with the farming data frame you created in Part II Q5. Add in the latitude and longitude associated with each post code in the data set. The code below will load in a file with lat and long info for each post code.</p></li>
</ol>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pcodes</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"http://garthtarr.com/data/aus_postcode_lat_long.csv"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Rows: 3312 Columns: 3
## ── Column specification ─────────────────────────────────────────────────────────────────────
## Delimiter: ","
## chr (1): postcode
## dbl (2): lat, long
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="recitation-3.html"><span class="header-section-number">3</span> Recitation 3</a></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#recitation-4"><span class="header-section-number">4</span> Recitation 4</a></li>
<li><a class="nav-link" href="#part-i-2"><span class="header-section-number">4.1</span> Part I</a></li>
<li><a class="nav-link" href="#part-ii-1"><span class="header-section-number">4.2</span> Part II</a></li>
<li><a class="nav-link" href="#part-iii-bonus-questions"><span class="header-section-number">4.3</span> Part III (Bonus Questions)</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/Tptrix29/r-tutorials/blob/master/2-4-rec-worksheet3.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/Tptrix29/r-tutorials/edit/master/2-4-rec-worksheet3.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Introduction to R</strong>" was written by Tptrix29. It was last built on 2024-06-11.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
